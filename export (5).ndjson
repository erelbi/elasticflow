{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"TurksatFlow-Datalink","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"TurksatFlow-Datalink\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega/v5.json\\\",\\n  \\\"width\\\": 800,\\n  \\\"height\\\": 400,\\n  \\\"padding\\\": 50,\\n  \\\"data\\\": [\\n    {\\n      \\\"name\\\": \\\"traffic\\\",\\n      \\\"url\\\": {\\n        \\\"%context%\\\": true,\\n        \\\"%timefield%\\\": \\\"timestamp\\\",\\n        \\\"index\\\": \\\"turksatflow\\\",\\n        \\\"body\\\": {\\n          \\\"size\\\": 0,\\n          \\\"aggs\\\": {\\n            \\\"sources\\\": {\\n              \\\"terms\\\": {\\n                \\\"field\\\": \\\"src_ip.keyword\\\",\\n                \\\"size\\\": 10\\n              },\\n              \\\"aggs\\\": {\\n                \\\"destinations\\\": {\\n                  \\\"terms\\\": {\\n                    \\\"field\\\": \\\"dst_ip.keyword\\\",\\n                    \\\"size\\\": 10\\n                  },\\n                  \\\"aggs\\\": {\\n                    \\\"bytes\\\": {\\n                      \\\"sum\\\": {\\n                        \\\"field\\\": \\\"in_bytes\\\"\\n                      }\\n                    }\\n                  }\\n                }\\n              }\\n            }\\n          }\\n        }\\n      },\\n      \\\"format\\\": {\\\"property\\\": \\\"aggregations.sources.buckets\\\"},\\n      \\\"transform\\\": [\\n        {\\n          \\\"type\\\": \\\"flatten\\\",\\n          \\\"fields\\\": [\\\"destinations.buckets\\\"],\\n          \\\"as\\\": [\\\"dst\\\"]\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.key\\\",\\n          \\\"as\\\": \\\"source\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.dst.key\\\",\\n          \\\"as\\\": \\\"target\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.dst.bytes.value\\\",\\n          \\\"as\\\": \\\"size\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"window\\\",\\n          \\\"sort\\\": {\\\"field\\\": \\\"size\\\", \\\"order\\\": \\\"descending\\\"},\\n          \\\"ops\\\": [\\\"row_number\\\"],\\n          \\\"as\\\": [\\\"rank\\\"]\\n        },\\n        {\\n          \\\"type\\\": \\\"filter\\\",\\n          \\\"expr\\\": \\\"datum.rank <= 20\\\"\\n        }\\n      ]\\n    },\\n    {\\n      \\\"name\\\": \\\"nodes\\\",\\n      \\\"source\\\": \\\"traffic\\\",\\n      \\\"transform\\\": [\\n        {\\n          \\\"type\\\": \\\"formula\\\",\\n          \\\"expr\\\": \\\"datum.source\\\",\\n          \\\"as\\\": \\\"id\\\"\\n        },\\n        {\\n          \\\"type\\\": \\\"collect\\\",\\n          \\\"sort\\\": {\\\"field\\\": \\\"id\\\"}\\n        }\\n      ]\\n    }\\n  ],\\n  \\\"scales\\\": [\\n    {\\n      \\\"name\\\": \\\"y\\\",\\n      \\\"type\\\": \\\"point\\\",\\n      \\\"range\\\": [0, {\\\"signal\\\": \\\"height\\\"}],\\n      \\\"domain\\\": {\\\"data\\\": \\\"nodes\\\", \\\"field\\\": \\\"id\\\"}\\n    },\\n    {\\n      \\\"name\\\": \\\"color\\\",\\n      \\\"type\\\": \\\"ordinal\\\",\\n      \\\"range\\\": {\\\"scheme\\\": \\\"category20\\\"},\\n      \\\"domain\\\": {\\\"data\\\": \\\"nodes\\\", \\\"field\\\": \\\"id\\\"}\\n    },\\n    {\\n      \\\"name\\\": \\\"size\\\",\\n      \\\"type\\\": \\\"linear\\\",\\n      \\\"range\\\": [1, 15],\\n      \\\"domain\\\": {\\\"data\\\": \\\"traffic\\\", \\\"field\\\": \\\"size\\\"}\\n    }\\n  ],\\n  \\\"marks\\\": [\\n    {\\n      \\\"type\\\": \\\"rect\\\",\\n      \\\"from\\\": {\\\"data\\\": \\\"nodes\\\"},\\n      \\\"encode\\\": {\\n        \\\"enter\\\": {\\n          \\\"x\\\": {\\\"value\\\": 0},\\n          \\\"width\\\": {\\\"value\\\": 10},\\n          \\\"y\\\": {\\\"scale\\\": \\\"y\\\", \\\"field\\\": \\\"id\\\"},\\n          \\\"height\\\": {\\\"value\\\": 20},\\n          \\\"fill\\\": {\\\"scale\\\": \\\"color\\\", \\\"field\\\": \\\"id\\\"},\\n          \\\"tooltip\\\": {\\\"field\\\": \\\"id\\\"}\\n        }\\n      }\\n    },\\n    {\\n      \\\"type\\\": \\\"rect\\\",\\n      \\\"from\\\": {\\\"data\\\": \\\"nodes\\\"},\\n      \\\"encode\\\": {\\n        \\\"enter\\\": {\\n          \\\"x\\\": {\\\"value\\\": 790},\\n          \\\"width\\\": {\\\"value\\\": 10},\\n          \\\"y\\\": {\\\"scale\\\": \\\"y\\\", \\\"field\\\": \\\"id\\\"},\\n          \\\"height\\\": {\\\"value\\\": 20},\\n          \\\"fill\\\": {\\\"scale\\\": \\\"color\\\", \\\"field\\\": \\\"id\\\"},\\n          \\\"tooltip\\\": {\\\"field\\\": \\\"id\\\"}\\n        }\\n      }\\n    },\\n    {\\n      \\\"type\\\": \\\"line\\\",\\n      \\\"from\\\": {\\\"data\\\": \\\"traffic\\\"},\\n      \\\"encode\\\": {\\n        \\\"enter\\\": {\\n          \\\"x\\\": {\\\"value\\\": 10},\\n          \\\"x2\\\": {\\\"value\\\": 790},\\n          \\\"y\\\": {\\\"scale\\\": \\\"y\\\", \\\"field\\\": \\\"source\\\"},\\n          \\\"y2\\\": {\\\"scale\\\": \\\"y\\\", \\\"field\\\": \\\"target\\\"},\\n          \\\"stroke\\\": {\\\"scale\\\": \\\"color\\\", \\\"field\\\": \\\"source\\\"},\\n          \\\"strokeWidth\\\": {\\\"scale\\\": \\\"size\\\", \\\"field\\\": \\\"size\\\"},\\n          \\\"strokeOpacity\\\": {\\\"value\\\": 0.6}\\n        },\\n        \\\"update\\\": {\\n          \\\"tooltip\\\": {\\n            \\\"signal\\\": \\\"{Source: datum.source, Target: datum.target, 'Traffic (GB)': format(datum.size/1024/1024/1024, ',.2f')}\\\"\\n          }\\n        },\\n        \\\"hover\\\": {\\n          \\\"strokeOpacity\\\": {\\\"value\\\": 1}\\n        }\\n      }\\n    },\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"from\\\": {\\\"data\\\": \\\"nodes\\\"},\\n      \\\"encode\\\": {\\n        \\\"enter\\\": {\\n          \\\"x\\\": {\\\"value\\\": -5},\\n          \\\"y\\\": {\\\"scale\\\": \\\"y\\\", \\\"field\\\": \\\"id\\\", \\\"offset\\\": 10},\\n          \\\"text\\\": {\\\"field\\\": \\\"id\\\"},\\n          \\\"fontSize\\\": {\\\"value\\\": 10},\\n          \\\"align\\\": {\\\"value\\\": \\\"right\\\"},\\n          \\\"baseline\\\": {\\\"value\\\": \\\"middle\\\"}\\n        }\\n      }\\n    },\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"from\\\": {\\\"data\\\": \\\"nodes\\\"},\\n      \\\"encode\\\": {\\n        \\\"enter\\\": {\\n          \\\"x\\\": {\\\"value\\\": 805},\\n          \\\"y\\\": {\\\"scale\\\": \\\"y\\\", \\\"field\\\": \\\"id\\\", \\\"offset\\\": 10},\\n          \\\"text\\\": {\\\"field\\\": \\\"id\\\"},\\n          \\\"fontSize\\\": {\\\"value\\\": 10},\\n          \\\"align\\\": {\\\"value\\\": \\\"left\\\"},\\n          \\\"baseline\\\": {\\\"value\\\": \\\"middle\\\"}\\n        }\\n      }\\n    }\\n  ]\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2024-10-27T21:40:04.371Z","id":"cd197750-562f-11e8-b711-83a5f93b17f3","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2024-10-29T21:37:11.477Z","version":"WzIwNjQsMl0="}
{"excludedObjects":[],"excludedObjectsCount":0,"exportedCount":1,"missingRefCount":0,"missingReferences":[]}